{% assign group = site.groups | where:"identifier", page.group %}

{% if page.status == 'RELEASE' %}
<h1>{{page.name}} Profile</h1>
{% elsif site.data.profile_versions[page.name].status == "DEPRECATED"%}
<h1>{{page.name}} <u>DEPRECATED</u> Profile</h1>
{% else %}
<h1>{{page.name}} <u>DRAFT</u> Profile</h1>
{% endif %}

<h3><strong>Profile Version:</strong> {{page.version}} ({{page.version_date | date_to_long_string }})</h3>
  <!-- LATEST RELEASES -->
   {% assign profile_versions = site.data.profile_versions[page.name] %}

   <p><strong>Latest release:</strong>
     {% if profile_versions.latest_release != null %}
     <a href="/profiles/{{page.name}}/{{profile_versions.latest_release}}/">{{profile_versions.latest_release}}</a>
     {% else %}
     none
     {% endif %}
   </p>
   {% if profile_versions.latest_publication != null %}
   <p><strong>Latest draft:</strong> <a href="/profiles/{{page.name}}/{{profile_versions.latest_publication}}">{{profile_versions.latest_publication}}</a></p>
   {% endif %}

   <!-- PREVIOUS VERSIONS -->
   {% assign prev_version = page.previous_version %}
   <p><strong>Previous version:</strong>
     {% if prev_version != null %}
     <a href="/profiles/{{page.name}}/{{page.previous_version}}">{{page.previous_version}}</a>
     {% else %}
     none
     {% endif %}
   </p>
   {% assign prev_release = page.previous_release %}
   {% if prev_release != null %}
   <p><strong>Previous release:</strong> <a href="/profiles/{{page.name}}/{{page.previous_release}}">{{page.previous_release}}</a></p>
   {% endif %}


<table class="bioschemas_spec_list" style="width: 100%; margin-left: auto; margin-right: auto;">
   <thead>
      <tr>
         <th>Group</th>
         <th>Use Cases</th>
         <th>Task &amp; Issues</th>
         <th>Examples</th>
         <th>Live Deploys</th>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>
            {% for g in group %}
            <a href="{{g.url}}">{{g.name}}</a>
            {% endfor %}
         </td>
         <td class="spec_links">
            {% if page.use_cases_url == '' or page.use_cases_url == nil %}
            <a>
            <img src="/images/use_case_spec.png" alt="View BioSchemas {{ page.name }} Use Cases"  style="filter: grayscale(100%);">
            </a>
            {%else%}
            <a href="{{page.use_cases_url}}">
            <img src="/images/use_case_spec.png" alt="View BioSchemas {{ page.name }} Use Cases">
            </a>
            {%endif%}
         </td>
         <td class="spec_links">
            {% if page.gh_tasks == '' or page.gh_tasks == nil %}
            <a>
            <img src="/images/specs_tasks.png" alt="BioSchemas {{ page.name }} Github Tasks or Issues" style="filter: grayscale(100%);">
            </a>
            {% else %}
            <a href="{{page.gh_tasks}}" target="_blank">
            <img src="/images/specs_tasks.png" alt="BioSchemas {{ page.name }} Github Tasks or Issues">
            </a>
            {% endif %}
         </td>
         <td class="spec_links" target="_blank">
            {% if page.full_example == '' or page.full_example == nil %}
            <a>
            <img src="/images/spec_examples.png" alt="View BioSchemas {{ page.name }} Examples" style="filter: grayscale(100%);">
            </a>
            {% else %}
            <a href="{{page.full_example}}" target="_blank">
            <img src="/images/spec_examples.png" alt="View BioSchemas {{ page.name }} Examples">
            </a>
            {% endif %}
         </td>
         <td class="spec_links">
            {% if page.live_deploy == '' or page.live_deploy == nil %}
            <a>
            <img src="/images/live_deploy.png" alt="View BioSchemas {{ page.name }} Examples" style="filter: grayscale(100%);">
            </a>
            {% else %}
            <a href="/liveDeploys/">
            <img src="/images/live_deploy.png" alt="View BioSchemas {{ page.name }} Examples">
            </a>
            {% endif %}
         </td>
      </tr>
   </tbody>
</table>

<p>If you spot any errors or omissions with this type, please file an issue in our <a href="{{page.gh_tasks}}" target="_blank">GitHub</a>.</p>

<input id="tab1" type="radio" name="tabs" checked>
<label for="tab1">Description</label>
<input id="tab2" type="radio" name="tabs">
<label for="tab2">Contributors</label>

<section id="tab2Content" class="tabs">
   <h3>Contributors</h3>
   {% for g in group %}
   <p>The following people have been involved in the creation of this specification document. They are all members of the <a href="{{g.url}}">{{g.name}}</a> group.</p>
   {% endfor %}
   <h6>Group Leader(s)</h6>
   <div id="leadTable">
        {% for g in group %}
        {% for leader in g.lead %}
        {% assign lead-id = "/people/" | append: leader %}
        {% assign author = site.people | where:"id", lead-id | first %}
        {% if author.homepage or author.github_username or author.orcid %}
        <p><a href="{{ author.url }}">{{ author.first-name }} {{ author.last-name }}</a></p>
        {% else %}
        <p>{{ author.first-name }} {{ author.last-name }}</p>
        {% endif %}
        {% else %}
        <p>No team leaders currently specified.</p>
        {% endfor %}
        {% endfor %}
   </div>
   <h6>Other team members</h6>
   <div id="peopleTable">
        {% for g in group %}
        {% for member-name in g.members %}

        {% unless g.lead contains member-name %}

        {% assign member-id = "/people/" | append: member-name %}
        {% assign member = site.people | where:"id", member-id | first %}
        <p><a href="{{ member.url }}">{{ member.first-name }} {{ member.last-name }}</a></p>

        {% endunless %}

        {% endfor %}
        {% endfor %}
   </div>
</section>
<section id="tab1Content" class="tabs">
   <h3>Schema.org Information</h3>
   <p>The <strong>{{page.name}}</strong> profile is defined over the
     <a href='{{page.type_base_url}}{{page.official_type}}'>{{page.official_type}}</a>
     type from Schema.org <a href="https://schema.org/version/{{page.schema_version}}">version {{page.schema_version}}</a>.
     <a href='{{page.type_base_url}}{{page.official_type}}'>{{page.official_type}}</a>
     fits into the type hierarchy as follows:</p>
   {%for type in page.hierarchy %}
   <a href="{{type.type_base_url}}{{type.type_name}}/">{{type.type_name}}</a>
   {%if forloop.index < page.hierarchy.size%}
   &gt;
   {%endif%}
   {%endfor%}
   <!-- TODO: Need to fix the following code if we update for type display -->
   {%if page.spec_type == 'Type'%}
   &gt;
   <a href="#">{{page.name}}</a>
   {%endif%}
   <h3>Description</h3>
   <p>{{page.description}}</p>
</section>
<hr />
<h5>Key to specification table</h5>
<p>Schema.org properties where the Expected Types have been changed, or new (i.e., Bioschemas created) properties/types are <em style="color: #0B794B;"><strong>green</strong></em>.</p>
<p>Schema.org properties/types are <em style="color: #990000;"><strong>red</strong></em>.</p>
<p>Pending Schema.org properties/types are <em style="color: #0000CC;"><strong>blue</strong></em>.</p>
<p>External (i.e., from 3rd party ontology) properties/types are <em style="color: #454547;"><strong>black</strong></em>.</p>
<p>CD = Cardinality</p>
<!-- change number columns based on device -->
<script type="application/x-javascript">
   if(navigator.userAgent.match(/android/i)) {
       document.getElementById('peopleTable').style.columnCount = 1;
       document.getElementById('leadTable').style.columnCount = 1;
   } else if(navigator.userAgent.match(/phone/i)) {
       document.getElementById('peopleTable').style.columnCount = 1;
       document.getElementById('leadTable').style.columnCount = 1;
   } else if(navigator.userAgent.match(/tablet/i)) {
       document.getElementById('peopleTable').style.columnCount = 1;
       document.getElementById('leadTable').style.columnCount = 1;
   } else if(navigator.userAgent.match(/ipad/i)) {
       document.getElementById('peopleTable').style.columnCount = 1;
       document.getElementById('leadTable').style.columnCount = 1;
   } else {
       document.getElementById('peopleTable').style.columnCount = 4;
       document.getElementById('leadTable').style.columnCount = 4;
   }
</script>
